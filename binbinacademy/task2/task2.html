<!DOCTYPE html>
<html>
	<head>
		<meta charset = "utf-8">
		<title>IFE JavaScript Task 01</title>
	</head>
<body>
	<h3>污染城市列表</h3>
	<ul id = "aqi-list">
	</ul>
	
<script type = "text/javascript">
var value = 60;
var aqiData = [
	["北京", 90],
	["上海", 50],
	["福州", 10],
	["广州", 50],
	["成都", 90],
	["西安", 100]
];

var aqiData_filter = filter(aqiData, value);
sort(aqiData_filter);
var ul = document.getElementById("aqi-list");
generate(aqiData_filter);

function filter(array, value){
	var array_2 = [];
	for(var i=0;i<array.length;i++){
		if(array[i][1] >= value){
			array_2.push(array[i]);
		}
	}
	return array_2;
}

function sort(array){
	var i,j;
	for(i=0;i<array.length;i++){
		for(j=array.length-1;j>i;j--){
			if(array[j][1]>array[j-1][1]){
				var temp;
				temp = array[j];
				array[j] = array[j-1];
				array[j-1] = temp;
			}
		}
	}
	console.log(array);
}

function generate(array){
	for(var i=0;i<array.length;i++){
		var li = document.createElement("li");
		var ranking = i+1;
		var node = document.createTextNode("第"+ranking+"名:"+array[i][0]+", "+array[i][1]);
		li.appendChild(node);
		ul.appendChild(li);
	}
	
}
</script>
</body>
</html>